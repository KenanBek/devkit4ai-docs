---
title: "Check Email Availability"
description: "Validate email availability before registration"
icon: "envelope-circle-check"
---

Check if an email address is available for registration. This endpoint validates email uniqueness based on the target role and project context.

## Endpoint

```
GET /api/v1/auth/check-email
```

## Authentication

No authentication required. This is a public endpoint.

## Query Parameters

<ParamField query="email" type="string" required>
  Email address to check for availability
</ParamField>

<ParamField query="role" type="string">
  Target user role: `platform_operator`, `developer`, or `end_user` (default: `end_user`)
</ParamField>

<ParamField query="project_id" type="string">
  Project UUID (required when `role=end_user`)
</ParamField>

## Response

<ResponseField name="available" type="boolean">
  Whether the email is available for registration
</ResponseField>

<ResponseField name="email" type="string">
  The email address that was checked
</ResponseField>

<ResponseField name="message" type="string">
  Human-readable message explaining availability status
</ResponseField>

## Email Uniqueness Rules

The platform enforces different uniqueness constraints based on user role:

### End Users (project-scoped)

- Email must be unique within the same project
- Same email can exist across different projects
- Constraint: `email + project_id` combination must be unique
- End users can share emails with operators/developers (different namespace)

### Developers & Operators (global)

- Email must be globally unique among non-end-users
- Cannot have duplicate developer or operator accounts with same email
- Can share email with end users (different namespace)

## Example Requests

### Check End User Email

```bash
curl "https://api.vibecoding.ad/api/v1/auth/check-email?email=user@example.com&role=end_user&project_id=550e8400-e29b-41d4-a716-446655440000"
```

### Check Developer Email

```bash
curl "https://api.vibecoding.ad/api/v1/auth/check-email?email=dev@example.com&role=developer"
```

### Check Without Role (defaults to end_user)

```bash
curl "https://api.vibecoding.ad/api/v1/auth/check-email?email=user@example.com&project_id=550e8400-e29b-41d4-a716-446655440000"
```

## Example Responses

### Available Email

```json
{
  "available": true,
  "email": "newuser@example.com",
  "message": "Email is available for registration"
}
```

### Email Already Registered (End User in Project)

```json
{
  "available": false,
  "email": "existing@example.com",
  "message": "An end user with this email already exists in this project"
}
```

### Email Already Registered (Developer/Operator)

```json
{
  "available": false,
  "email": "developer@example.com",
  "message": "Email already registered"
}
```

## Error Responses

### Missing Required Parameters

```json
{
  "detail": "Email is required"
}
```

```json
{
  "detail": "Project ID is required for end_user role"
}
```

### Invalid Project ID Format

```json
{
  "detail": "Invalid project_id format. Must be a valid UUID."
}
```

## Use Cases

### Real-Time Form Validation

Check email availability as users type in registration forms:

```typescript
async function checkEmailAvailability(
  email: string,
  role: string,
  projectId?: string
): Promise<boolean> {
  const params = new URLSearchParams({ email, role });
  if (projectId) params.append('project_id', projectId);
  
  const response = await fetch(
    `https://api.vibecoding.ad/api/v1/auth/check-email?${params}`
  );
  
  const data = await response.json();
  return data.available;
}
```

(((REPLACE_THIS_WITH_IMAGE: registration-form-email-validation.png: Registration form showing real-time email availability check)))

### Pre-Registration Validation

Validate email before initiating registration flow:

```typescript
// Before showing registration form
const isAvailable = await checkEmailAvailability(
  'user@example.com',
  'end_user',
  projectId
);

if (!isAvailable) {
  showError('This email is already registered');
  redirectToLogin();
}
```

### Bulk User Import

Check multiple emails before batch registration:

```typescript
async function validateEmailBatch(
  emails: string[],
  projectId: string
): Promise<string[]> {
  const checks = await Promise.all(
    emails.map(email =>
      checkEmailAvailability(email, 'end_user', projectId)
    )
  );
  
  return emails.filter((_, index) => checks[index]);
}
```

## Security Considerations

<Warning>
This endpoint is intentionally public to support registration forms. However, it reveals whether an email exists in the system. Consider implementing rate limiting on the client side to prevent email enumeration attacks.
</Warning>

### Best Practices

1. **Rate Limiting**: Implement client-side throttling (e.g., 1 request per second)
2. **Debouncing**: Wait for user to stop typing before checking
3. **Error Handling**: Gracefully handle network errors
4. **Privacy**: Don't expose specific user information beyond availability

## Related Pages

<CardGroup cols={2}>
  <Card title="Register User" icon="user-plus" href="/cloud-api/auth/register">
    Create new user account
  </Card>
  <Card title="Registration Flow" icon="diagram-project" href="/starter-kit/auth/registration-login">
    Starter Kit registration implementation
  </Card>
  <Card title="Role-Based Access" icon="users-gear" href="/starter-kit/auth/role-based-access">
    Understanding user roles
  </Card>
  <Card title="Project-Scoped Users" icon="folder-user" href="/cloud-admin/users/viewing-end-users">
    Managing end users
  </Card>
</CardGroup>
